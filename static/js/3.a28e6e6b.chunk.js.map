{"version":3,"sources":["components/UI/Icons/Area/Area.module.scss","components/UI/Icons/House/House.module.scss","components/pages/ListItem/ListItem.module.scss","components/pages/List/List.module.scss","pages/routes/MainPages/Main/Main.module.scss","components/HOC/withAjaxLoadMore.js","components/UI/Icons/Area/index.js","components/UI/Icons/House/index.js","components/pages/ListItem/index.js","components/pages/List/index.js","pages/routes/MainPages/Main/index.js"],"names":["module","exports","withAjaxLoadMore","WrappedComponent","WithAjaxLoadMore","state","currentPage","handleScroll","debounce","isLoading","props","scrollTop","document","documentElement","body","scrollHeight","clientHeight","window","innerHeight","Math","ceil","setPage","setState","addEventListener","this","removeEventListener","page","React","Component","displayName","Area","className","Icon","House","ListItemContainer","house","images","location","localityName","mkadDistance","id","landDetails","specification","saleOffer","price","multiCurrencyPrice","usd","toLocaleString","styles","ListItem","href","ListItem__link","getImgUrl","ListItem__image","src","alt","ListItem__caption","ListItem__title","ListItem__price","ListItem__addInfo","area","ListContainer","items","List","length","map","key","compose","connect","estates","estatesSelectors","getEstates","getLoading","estatesEffects","memo","fetchEstates","useEffect","PageWrapper","Loading","Spinner"],"mappings":"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","file":"static/js/3.a28e6e6b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Icon\":\"Area_Icon__1cHKO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Icon\":\"House_Icon__3lCxq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ListItem\":\"ListItem_ListItem__3MxFD\",\"ListItem__link\":\"ListItem_ListItem__link__1v4mT\",\"ListItem__caption\":\"ListItem_ListItem__caption__1tGf0\",\"ListItem__title\":\"ListItem_ListItem__title__l4s3u\",\"ListItem__price\":\"ListItem_ListItem__price__Q4DdY\",\"ListItem__addInfo\":\"ListItem_ListItem__addInfo__2BiOM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"List\":\"List_List__1DPGk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"PageWrapper\":\"Main_PageWrapper__1xZ9t\",\"Loading\":\"Main_Loading__2cbUs\"};","/* eslint-disable react/state-in-constructor */\nimport React from 'react';\nimport { debounce } from 'lib/helpers';\n\nfunction withAjaxLoadMore(WrappedComponent) {\n  class WithAjaxLoadMore extends React.Component {\n    state = {\n      currentPage: 0,\n    };\n\n    handleScroll = debounce(() => {\n      const { isLoading } = this.props;\n      const scrollTop =\n        (document.documentElement && document.documentElement.scrollTop) ||\n        document.body.scrollTop;\n      const scrollHeight =\n        (document.documentElement && document.documentElement.scrollHeight) ||\n        document.body.scrollHeight;\n      const clientHeight =\n        document.documentElement.clientHeight || window.innerHeight;\n      const scrolledToBottom =\n        Math.ceil(scrollTop + clientHeight + 100) >= scrollHeight;\n      if (scrolledToBottom && !isLoading) {\n        this.setPage();\n      }\n    }, 300);\n\n    componentDidMount() {\n      document.addEventListener('scroll', this.handleScroll);\n    }\n\n    componentWillUnmount() {\n      document.removeEventListener('scroll', this.handleScroll);\n    }\n\n    setPage = () => {\n      const { currentPage } = this.state;\n      this.setState({ currentPage: currentPage + 1 });\n    };\n\n    render() {\n      const { currentPage } = this.state;\n      // eslint-disable-next-line react/jsx-props-no-spreading\n      return <WrappedComponent {...this.props} page={currentPage} />;\n    }\n  }\n\n  withAjaxLoadMore.displayName = `WithAjaxLoadMore(${WrappedComponent.displayName})`;\n  return WithAjaxLoadMore;\n}\n\nexport default withAjaxLoadMore;\n","import React from 'react';\nimport { Icon } from './Area.module.scss';\n\nconst Area = () => <span className={Icon} />;\n\nexport default Area;\n","import React from 'react';\nimport { Icon } from './House.module.scss';\n\nconst House = () => <span className={Icon} />;\n\nexport default House;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { getImgUrl } from 'lib/helpers';\nimport { AreaIcon, HouseIcon } from 'components/UI/Icons';\nimport styles from './ListItem.module.scss';\n\nconst ListItemContainer = ({ house }) => {\n  const {\n    images,\n    location: { localityName, mkadDistance },\n    id,\n    landDetails,\n    specification,\n    saleOffer,\n  } = house;\n  const price = saleOffer\n    ? `$${saleOffer.multiCurrencyPrice.usd.toLocaleString('ru')}`\n    : null;\n  return (\n    <li className={styles.ListItem}>\n      <a href=\"/\" className={styles.ListItem__link}>\n        {getImgUrl(images) && (\n          <div className={styles.ListItem__image}>\n            <img\n              src={getImgUrl(images)}\n              alt={`Изображение дома «${localityName}»`}\n            />\n          </div>\n        )}\n        <figcaption className={styles.ListItem__caption}>\n          <h4 className={styles.ListItem__title}>\n            Дом в посёлке «{localityName}», {mkadDistance} км, ID {id}\n          </h4>\n          <span className={styles.ListItem__price}>{price}</span>\n          <ul className={styles.ListItem__addInfo}>\n            <li>\n              <AreaIcon />\n              {landDetails.area} сот\n            </li>\n            <li>\n              <HouseIcon />\n              {specification.area} м<sup>2</sup>\n            </li>\n          </ul>\n        </figcaption>\n      </a>\n    </li>\n  );\n};\n\nListItemContainer.propTypes = {\n  house: PropTypes.object.isRequired,\n};\n\nexport default ListItemContainer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItem from '../ListItem';\nimport { List } from './List.module.scss';\n\nconst ListContainer = ({ items = [] }) => {\n  return (\n    <ul className={List}>\n      {items.length > 0 ? (\n        items.map(house => <ListItem key={house.id} house={house} />)\n      ) : (\n        <div>Нет объектов недвижимости</div>\n      )}\n    </ul>\n  );\n};\n\nListContainer.propTypes = {\n  items: PropTypes.arrayOf(PropTypes.object).isRequired,\n};\n\nexport default ListContainer;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\n// HOCS\nimport { withAjaxLoadMore } from 'components/HOC';\n// DUCKS\nimport {\n  effects as estatesEffects,\n  selectors as estatesSelectors,\n} from 'redux/ducks/estates.duck';\n\n// COMPONENTS\nimport List from 'components/pages/List';\nimport Spinner from 'components/UI/Spinner';\nimport { PageWrapper, Loading } from './Main.module.scss';\n\nconst MainPage = ({ estates, fetchEstates, isLoading, page }) => {\n  React.useEffect(() => {\n    fetchEstates(page);\n  }, [fetchEstates, page]);\n  return (\n    <div className={PageWrapper}>\n      {estates && <List items={estates.items || []} />}\n      {isLoading && (\n        <div className={Loading}>\n          <Spinner />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default compose(\n  connect(\n    state => ({\n      estates: estatesSelectors.getEstates(state),\n      isLoading: estatesSelectors.getLoading(state),\n    }),\n    { ...estatesEffects },\n  ),\n  withAjaxLoadMore,\n  React.memo,\n)(MainPage);\n"],"sourceRoot":""}